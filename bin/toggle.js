#!/usr/bin/env node
// Generated by CoffeeScript 1.12.6
(function() {
  var NPM, TAOBAO, command, exec, green, npm, ref, registry, script, taobao, url, version, yellow;

  TAOBAO = 'https://registry.npm.taobao.org/';

  NPM = 'https://registry.npmjs.org/';

  exec = require('execa');

  command = require('commander');

  version = require('../package').version;

  ref = require('colors/safe'), green = ref.green, yellow = ref.yellow;

  command.usage((green('--taobao')) + " or " + (green('--npm'))).version(version).option('-t, --taobao', 'set taobao registry').option('-n, --npm', 'set npm registry').option('-r, --registry', 'show current registry').parse(process.argv);

  taobao = command.taobao, npm = command.npm, registry = command.registry;

  if (!((taobao != null) || (npm != null) || (registry != null))) {
    command.help();
  }

  url = taobao != null ? TAOBAO : NPM;

  script = registry ? 'npm config get registry' : "npm config set registry " + url;

  exec.shell(script).then(function(arg) {
    var stdout;
    stdout = arg.stdout;
    if (!registry) {
      return console.log("npm registry has switched to " + (yellow(url)));
    } else {
      return console.log("current registry is " + (yellow(stdout)));
    }
  })["catch"](console.error);

}).call(this);
